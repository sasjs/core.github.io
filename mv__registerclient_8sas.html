<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- HTML header for doxygen 1.8.17-->
<html xmlns="https://www.w3.org/1999/xhtml" lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=9" />
  <meta property="og:type" content="website">
  <meta property="og:title" content="MacroCore" />
  <meta property="og:url" content="https://core.sasjs.io" />
  <meta property="og:image" content="https://core.sasjs.io/Macro_core_website_1.png" />
  <meta name="author" content="Allan Bowe">
  <meta name="generator" content="Doxygen 1.9.2" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Macros for SAS Application Developers" />
  <meta name="og:description" content="Macros for SAS Application Developers" />
  <title>viya/mv_registerclient.sas File Reference</title>
  <link href="tabs.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
 <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
  <link href="new_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
  <div id="top">
    <!-- do not remove this div, it is closed by doxygen! -->
    <div id="titlearea">
      <table cellspacing="0" cellpadding="0">
        <tbody>
          <tr style="height: 56px">
            <td id="projectlogo">
              <a href=""><img alt="Logo" src="Macro_core_website_1.png" /></a>
            </td>
            <td id="projectalign" style="padding-left: 0.5em">
              <div id="projectbrief">
                Macros for SAS Application Developers<br />
                <a href="https://github.com/sasjs/core">
                  https://github.com/sasjs/core
                </a>
              </div>
            </td>
          </tr>
      </table>
      </td>
      </tr>
      </tbody>
      </table>
    </div>
    <!-- end header part -->
  </div>
</body>
</html><!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('mv__registerclient_8sas.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle"><div class="title">mv_registerclient.sas File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Register Client and Secret (admin task)  
<a href="#details">More...</a></p>

<p><a href="mv__registerclient_8sas_source.html">Go to the source code of this file.</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >When building apps on SAS Viya, an client id and secret are sometimes required. In order to generate them, filesystem access to the Consul Token is needed (it is not enough to be in the SASAdministrator group in SAS Environment Manager).</p>
<p >If you are registering a lot of clients / secrets, you may find it more convenient to use the <a href="https://sasjs.io/apps/#viya-client-token-generator">Viya Token Generator</a> (a SASjs Web App to automate the generation of clients &amp; secrets with various settings).</p>
<p >For further information on clients / secrets, see; </p><ul>
<li><a href="https://developer.sas.com/reference/auth/#register">https://developer.sas.com/reference/auth/#register</a> </li>
<li><a href="https://proc-x.com/2019/01/authentication-to-sas-viya-a-couple-of-approaches">https://proc-x.com/2019/01/authentication-to-sas-viya-a-couple-of-approaches</a> </li>
<li><a href="https://cli.sasjs.io/faq/#how-can-i-obtain-a-viya-client-and-secret">https://cli.sasjs.io/faq/#how-can-i-obtain-a-viya-client-and-secret</a></li>
</ul>
<p>The default viyaroot location is: <code>/opt/sas/viya/config</code></p>
<p >Usage: </p><pre class="fragment">%* compile macros;
filename mc url
  "https://raw.githubusercontent.com/sasjs/core/main/all.sas";
%inc mc;

%* specific client with just openid scope;
%mv_registerclient(client_id=YourClient
  ,client_secret=YourSecret
  ,scopes=openid
)

%* generate random client details with all scopes;
%mv_registerclient(scopes=openid *)

%* generate random client with 90/180 second access/refresh token expiry;
%mv_registerclient(scopes=openid *
  ,access_token_validity=90
  ,refresh_token_validity=180
)
</pre> <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client_id=</td><td>The client name. Auto generated if blank. </td></tr>
    <tr><td class="paramname">client_secret=</td><td>Client secret. Auto generated if client is blank. </td></tr>
    <tr><td class="paramname">scopes=(openid)</td><td>List of space-seperated unquoted scopes </td></tr>
    <tr><td class="paramname">grant_type=(authorization_code|refresh_token)</td><td>Valid values are "password" or "authorization_code" (unquoted) </td></tr>
    <tr><td class="paramname">outds=(mv_registerclient)</td><td>The dataset to contain the registered client id and secret </td></tr>
    <tr><td class="paramname">access_token_validity=(DEFAULT)</td><td>The duration of validity of the access token in seconds. A value of DEFAULT will omit the entry (and use system default) </td></tr>
    <tr><td class="paramname">refresh_token_validity=(DEFAULT)</td><td>The duration of validity of the refresh token in seconds. A value of DEFAULT will omit the entry (and use system default) </td></tr>
    <tr><td class="paramname">name=</td><td>An optional, human readable name for the client </td></tr>
    <tr><td class="paramname">required_user_groups=</td><td>A list of group names. If a user does not belong to all the required groups, the user will not be authenticated and no tokens are issued to this client for that user. If this field is not specified, authentication and token issuance proceeds normally. </td></tr>
    <tr><td class="paramname">autoapprove=</td><td>During the auth step the user can choose which scope to apply. Setting this to true will autoapprove all the client scopes. </td></tr>
    <tr><td class="paramname">use_session=</td><td>If true, access tokens issued to this client will be associated with an HTTP session and revoked upon logout or time-out. </td></tr>
    <tr><td class="paramname">outjson=</td><td>(<em>null</em>) A dataset containing the lines of JSON submitted. Useful for debugging.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section version"><dt>Version</dt><dd>VIYA V.03.04 </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Allan Bowe, source: <a href="https://github.com/sasjs/core">https://github.com/sasjs/core</a></dd></dl>
<h4>SAS Macros </h4>
<ul>
<li><a class="el" href="mp__abort_8sas.html" title="abort gracefully according to context">mp_abort.sas</a> </li>
<li><a class="el" href="mf__getplatform_8sas.html" title="Returns platform specific variables.">mf_getplatform.sas</a> </li>
<li><a class="el" href="mf__getuniquefileref_8sas.html" title="Assigns and returns an unused fileref.">mf_getuniquefileref.sas</a> </li>
<li><a class="el" href="mf__getuniquelibref_8sas.html" title="Returns an unused libref.">mf_getuniquelibref.sas</a> </li>
<li><a class="el" href="mf__loc_8sas.html" title="Returns physical location of various SAS items.">mf_loc.sas</a> </li>
<li><a class="el" href="mf__getquotedstr_8sas.html" title="Adds custom quotes / delimiters to a delimited string.">mf_getquotedstr.sas</a> </li>
<li><a class="el" href="mf__getuser_8sas.html" title="Returns a userid according to session context.">mf_getuser.sas</a> </li>
</ul>

<p class="definition">Definition in file <a class="el" href="mv__registerclient_8sas_source.html">mv_registerclient.sas</a>.</p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.17-->
<!-- start footer part -->
<div id="nav-path" class="navpath">
  <!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_f3c9615c6d389fd64e9075885fcd8e6e.html">viya</a></li><li class="navelem"><a class="el" href="mv__registerclient_8sas.html">mv_registerclient.sas</a></li>
    <li class="footer">
      Generated by
      <a href="https://www.doxygen.org/index.html">
        <img class="footer" src="doxygen.svg" alt="doxygen"
      /></a>
      1.9.2
    </li>
    <li>
      <i> For more information visit the </i>
      <a href="https://github.com/sasjs/core">Macro Core library</a>.
    </li>
  </ul>
</div>

<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- HTML header for doxygen 1.8.17-->
<html xmlns="https://www.w3.org/1999/xhtml" lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=9" />
  <meta property="og:type" content="website">
  <meta property="og:title" content="MacroCore" />
  <meta property="og:url" content="https://core.sasjs.io" />
  <meta property="og:image" content="https://core.sasjs.io/Macro_core_website_1.png" />
  <meta name="author" content="Allan Bowe">
  <meta name="generator" content="Doxygen 1.10.0" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Macros for SAS Application Developers" />
  <meta name="og:description" content="Macros for SAS Application Developers" />
  <title>base/mp_filterstore.sas File Reference</title>
  <link href="tabs.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
 <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
  <link href="new_stylesheet.css" rel="stylesheet" type="text/css"/>
  <!-- Matomo -->
  <script>
    var _paq = window._paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function () {
      var u = "https://analytics.4gl.io/";
      _paq.push(['setTrackerUrl', u + 'matomo.php']);
      _paq.push(['setSiteId', '6']);
      var d = document, g = d.createElement('script'), s = d.getElementsByTagName('script')[0];
      g.async = true; g.src = u + 'matomo.js'; s.parentNode.insertBefore(g, s);
    })();
  </script>
  <!-- End Matomo Code -->
</head>
<body>
  <div id="top">
    <!-- do not remove this div, it is closed by doxygen! -->
    <div id="titlearea">
      <table cellspacing="0" cellpadding="0">
        <tbody>
          <tr style="height: 56px">
            <td id="projectlogo">
              <a href=""><img alt="Logo" src="Macro_core_website_1.png" /></a>
            </td>
            <td id="projectalign" style="padding-left: 0.5em">
              <div id="projectbrief">
                Macros for SAS Application Developers<br />
                <a href="https://github.com/sasjs/core">
                  https://github.com/sasjs/core
                </a>
              </div>
            </td>
          </tr>
      </table>
      </td>
      </tr>
      </tbody>
      </table>
    </div>
    <!-- end header part -->
  </div>
</body>
</html>
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('mp__filterstore_8sas.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">mp_filterstore.sas File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Checks &amp; Stores an input filter table and returns the Filter Key.  
<a href="#details">More...</a></p>

<p><a href="mp__filterstore_8sas_source.html">Go to the source code of this file.</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Used to generate a FILTER_RK from an input query dataset. This process requires several permanent tables (names are configurable). The benefit of storing query values at backend is to enable stored 'views' of filtered tables at frontend (ie, when building <a href="https://sasapps.io">SAS-Powered Apps</a>). This macro is also used in <a href="https://datacontroller.io">Data Controller for SAS</a>.</p>
<p>A more recent feature of this macro is the ability to support filter queries on Format Catalogs. This is achieved by adding a <code>-FC</code> suffix to the <code>libds</code> parameter - where the "ds" in this case is the catalog name.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">libds=</td><td>The target dataset to be filtered (lib should be assigned). If filtering a format catalog, add the following suffix: <code>-FC</code>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">queryds=</td><td>(WORK.FILTERQUERY) The temporary input query dataset to be validated. Has the following format: <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">GROUP_LOGIC:$3   </th><th class="markdownTableHeadNone">SUBGROUP_LOGIC:$3   </th><th class="markdownTableHeadNone">SUBGROUP_ID:8.   </th><th class="markdownTableHeadNone">VARIABLE_NM:$32   </th><th class="markdownTableHeadNone">OPERATOR_NM:$10   </th><th class="markdownTableHeadNone">RAW_VALUE:$32767    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">AND   </td><td class="markdownTableBodyNone">AND   </td><td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">SOME_BESTNUM   </td><td class="markdownTableBodyNone">&gt;   </td><td class="markdownTableBodyNone">1    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">AND   </td><td class="markdownTableBodyNone">AND   </td><td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">SOME_TIME   </td><td class="markdownTableBodyNone">=   </td><td class="markdownTableBodyNone">77333   </td></tr>
</table>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">filter_summary=</td><td>(PERM.FILTER_SUMMARY) Permanent table containing summary filter values. The definition is available by running <a class="el" href="mp__coretable_8sas.html" title="Create the permanent Core tables.">mp_coretable.sas</a> as follows: <code>mp_coretable(FILTER_SUMMARY)</code>. Example values: <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">FILTER_RK:best.   </th><th class="markdownTableHeadNone">FILTER_HASH:$32.   </th><th class="markdownTableHeadNone">FILTER_TABLE:$41.   </th><th class="markdownTableHeadNone">PROCESSED_DTTM:datetime19.    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>1</code>   </td><td class="markdownTableBodyNone"><code>540E96F566D194AB58DD4C413C99C9DB</code>   </td><td class="markdownTableBodyNone"><code>VIYA6014.MPE_TABLES</code>   </td><td class="markdownTableBodyNone"><code>1956084246</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>2</code>   </td><td class="markdownTableBodyNone"><code>87737DB9EEE2650F5C89956CEAD0A14F</code>   </td><td class="markdownTableBodyNone"><code>VIYA6014.MPE_X_TEST</code>   </td><td class="markdownTableBodyNone"><code>1956084452.1</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>3</code>   </td><td class="markdownTableBodyNone"><code>8048BD908DBBD83D013560734E90D394</code>   </td><td class="markdownTableBodyNone"><code>VIYA6014.MPE_TABLES</code>   </td><td class="markdownTableBodyNone"><code>1956093620.6</code>   </td></tr>
</table>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">filter_detail=</td><td>(PERM.FILTER_DETAIL) Permanent table containing detailed (raw) filter values. The definition is available by running <a class="el" href="mp__coretable_8sas.html" title="Create the permanent Core tables.">mp_coretable.sas</a> as follows: <code>mp_coretable(FILTER_DETAIL)</code>. Example values: <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">FILTER_HASH:$32.   </th><th class="markdownTableHeadNone">FILTER_LINE:best.   </th><th class="markdownTableHeadNone">GROUP_LOGIC:$3.   </th><th class="markdownTableHeadNone">SUBGROUP_LOGIC:$3.   </th><th class="markdownTableHeadNone">SUBGROUP_ID:best.   </th><th class="markdownTableHeadNone">VARIABLE_NM:$32.   </th><th class="markdownTableHeadNone">OPERATOR_NM:$12.   </th><th class="markdownTableHeadNone">RAW_VALUE:$4000.   </th><th class="markdownTableHeadNone">PROCESSED_DTTM:datetime19.    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>540E96F566D194AB58DD4C413C99C9DB</code>   </td><td class="markdownTableBodyNone"><code>1</code>   </td><td class="markdownTableBodyNone"><code>AND</code>   </td><td class="markdownTableBodyNone"><code>AND</code>   </td><td class="markdownTableBodyNone"><code>1</code>   </td><td class="markdownTableBodyNone"><code>LIBREF</code>   </td><td class="markdownTableBodyNone"><code>CONTAINS</code>   </td><td class="markdownTableBodyNone"><code>DC</code>   </td><td class="markdownTableBodyNone"><code>1956084245.8</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>540E96F566D194AB58DD4C413C99C9DB</code>   </td><td class="markdownTableBodyNone"><code>2</code>   </td><td class="markdownTableBodyNone"><code>AND</code>   </td><td class="markdownTableBodyNone"><code>OR</code>   </td><td class="markdownTableBodyNone"><code>2</code>   </td><td class="markdownTableBodyNone"><code>DSN</code>   </td><td class="markdownTableBodyNone"><code>=</code>   </td><td class="markdownTableBodyNone"><code>MPE_LOCK_ANYTABLE</code>   </td><td class="markdownTableBodyNone"><code>1956084245.8</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>87737DB9EEE2650F5C89956CEAD0A14F</code>   </td><td class="markdownTableBodyNone"><code>1</code>   </td><td class="markdownTableBodyNone"><code>AND</code>   </td><td class="markdownTableBodyNone"><code>AND</code>   </td><td class="markdownTableBodyNone"><code>1</code>   </td><td class="markdownTableBodyNone"><code>PRIMARY_KEY_FIELD</code>   </td><td class="markdownTableBodyNone"><code>IN</code>   </td><td class="markdownTableBodyNone"><code>(1,2,3)</code>   </td><td class="markdownTableBodyNone"><code>1956084451.9</code>   </td></tr>
</table>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lock_table=</td><td>(PERM.LOCK_TABLE) Permanent locking table. Used to manage concurrent access. The definition is available by running <a class="el" href="mp__coretable_8sas.html" title="Create the permanent Core tables.">mp_coretable.sas</a> as follows: <code>mp_coretable(LOCKTABLE)</code>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">maxkeytable=</td><td>(0) Optional permanent reference table used for retained key tracking. Described in <a class="el" href="mp__retainedkey_8sas.html" title="Generate and apply retained key values to a staging table.">mp_retainedkey.sas</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mdebug=</td><td>(1) set to 1 to enable DEBUG messages </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">outresult=</td><td>(work.result) The result table with the FILTER_RK </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">outquery=</td><td>(work.query) The original query, taken as extract after table load</td></tr>
  </table>
  </dd>
</dl>
<h4>SAS Macros </h4>
<ul>
<li><a class="el" href="mddl__sas__cntlout_8sas.html" title="The CNTLOUT table generated by proc format.">mddl_sas_cntlout.sas</a> </li>
<li><a class="el" href="mf__getuniquename_8sas.html" title="Returns a shortened (32 char) GUID as a valid SAS name.">mf_getuniquename.sas</a> </li>
<li><a class="el" href="mf__getvalue_8sas.html" title="Retrieves a value from a dataset. If no filter supplied, then first record is used.">mf_getvalue.sas</a> </li>
<li><a class="el" href="mf__islibds_8sas.html" title="Checks whether a string follows correct library.dataset format.">mf_islibds.sas</a> </li>
<li><a class="el" href="mf__nobs_8sas.html" title="Returns number of logical (undeleted) observations.">mf_nobs.sas</a> </li>
<li><a class="el" href="mp__abort_8sas.html" title="abort gracefully according to context">mp_abort.sas</a> </li>
<li><a class="el" href="mp__filtercheck_8sas.html" title="Checks an input filter table for validity.">mp_filtercheck.sas</a> </li>
<li><a class="el" href="mp__hashdataset_8sas.html" title="Returns a unique hash for a dataset.">mp_hashdataset.sas</a> </li>
<li><a class="el" href="mp__retainedkey_8sas.html" title="Generate and apply retained key values to a staging table.">mp_retainedkey.sas</a></li>
</ul>
<h4>Related Macros </h4>
<ul>
<li><a class="el" href="mp__filtercheck_8sas.html" title="Checks an input filter table for validity.">mp_filtercheck.sas</a> </li>
<li><a class="el" href="mp__filtergenerate_8sas.html" title="Generates a filter clause from an input table, to a fileref.">mp_filtergenerate.sas</a> </li>
<li><a class="el" href="mp__filtervalidate_8sas.html" title="Checks a generated filter query for validity.">mp_filtervalidate.sas</a> </li>
<li>mp_filterstore.test.sas</li>
</ul>
<dl class="section version"><dt>Version</dt><dd>9.2 </dd></dl>
<dl class="section author"><dt>Author</dt><dd><a href="https://www.linkedin.com/in/allanbowe">Allan Bowe</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="mp__filterstore_8sas_source.html">mp_filterstore.sas</a>.</p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.17-->
<!-- start footer part -->
<div id="nav-path" class="navpath">
  <!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_e914ee4d4a44400f1fdb170cb4ead18a.html">base</a></li><li class="navelem"><a class="el" href="mp__filterstore_8sas.html">mp_filterstore.sas</a></li>
    <li class="footer">
      Generated by
      <a href="https://www.doxygen.org/index.html">
        <img class="footer" src="doxygen.svg" alt="doxygen"
      /></a>
      1.10.0
    </li>
    <li>
      <i> For more information visit the </i>
      <a href="https://github.com/sasjs/core">Macro Core library</a>.
    </li>
  </ul>
</div>

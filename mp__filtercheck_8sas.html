<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- HTML header for doxygen 1.8.17-->
<html xmlns="https://www.w3.org/1999/xhtml" lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=9" />
  <meta property="og:type" content="website">
  <meta property="og:title" content="MacroCore" />
  <meta property="og:url" content="https://core.sasjs.io" />
  <meta property="og:image" content="https://core.sasjs.io/Macro_core_website_1.png" />
  <meta name="author" content="Allan Bowe">
  <meta name="generator" content="Doxygen 1.12.0" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Macros for SAS Application Developers" />
  <meta name="og:description" content="Macros for SAS Application Developers" />
  <title>base/mp_filtercheck.sas File Reference</title>
  <link href="tabs.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
 <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
  <link href="new_stylesheet.css" rel="stylesheet" type="text/css"/>
  <!-- Matomo -->
  <script>
    var _paq = window._paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function () {
      var u = "https://analytics.4gl.io/";
      _paq.push(['setTrackerUrl', u + 'matomo.php']);
      _paq.push(['setSiteId', '6']);
      var d = document, g = d.createElement('script'), s = d.getElementsByTagName('script')[0];
      g.async = true; g.src = u + 'matomo.js'; s.parentNode.insertBefore(g, s);
    })();
  </script>
  <!-- End Matomo Code -->
</head>
<body>
  <div id="top">
    <!-- do not remove this div, it is closed by doxygen! -->
    <div id="titlearea">
      <table cellspacing="0" cellpadding="0">
        <tbody>
          <tr style="height: 56px">
            <td id="projectlogo">
              <a href=""><img alt="Logo" src="Macro_core_website_1.png" /></a>
            </td>
            <td id="projectalign" style="padding-left: 0.5em">
              <div id="projectbrief">
                Macros for SAS Application Developers<br />
                <a href="https://github.com/sasjs/core">
                  https://github.com/sasjs/core
                </a>
              </div>
            </td>
          </tr>
      </table>
      </td>
      </tr>
      </tbody>
      </table>
    </div>
    <!-- end header part -->
  </div>
</body>
</html>
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('mp__filtercheck_8sas.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">mp_filtercheck.sas File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Checks an input filter table for validity.  
<a href="#details">More...</a></p>

<p><a href="mp__filtercheck_8sas_source.html">Go to the source code of this file.</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Performs checks on the input table to ensure it arrives in the correct format. This is necessary to prevent code injection. Will update SYSCC to 1008 if bad records are found, and call <a class="el" href="mp__abort_8sas.html" title="abort gracefully according to context">mp_abort.sas</a> for a graceful service exit (configurable).</p>
<p>Used for dynamic filtering in <a href="https://datacontroller.io">Data Controller for SAS&reg;</a>.</p>
<p>Usage: </p><pre class="fragment">%mp_filtercheck(work.filter,targetds=sashelp.class,outds=work.badrecords)
</pre><p>The input table should have the following format:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">GROUP_LOGIC:$3   </th><th class="markdownTableHeadNone">SUBGROUP_LOGIC:$3   </th><th class="markdownTableHeadNone">SUBGROUP_ID:8.   </th><th class="markdownTableHeadNone">VARIABLE_NM:$32   </th><th class="markdownTableHeadNone">OPERATOR_NM:$10   </th><th class="markdownTableHeadNone">RAW_VALUE:$4000    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">AND   </td><td class="markdownTableBodyNone">AND   </td><td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">AGE   </td><td class="markdownTableBodyNone">=   </td><td class="markdownTableBodyNone">12    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">AND   </td><td class="markdownTableBodyNone">AND   </td><td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">SEX   </td><td class="markdownTableBodyNone">&lt;=   </td><td class="markdownTableBodyNone">'M'    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">AND   </td><td class="markdownTableBodyNone">OR   </td><td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">Name   </td><td class="markdownTableBodyNone">NOT IN   </td><td class="markdownTableBodyNone">('Jane','Alfred')    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">AND   </td><td class="markdownTableBodyNone">OR   </td><td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">Weight   </td><td class="markdownTableBodyNone">&gt;=   </td><td class="markdownTableBodyNone">7   </td></tr>
</table>
<p>Rules applied:</p>
<ul>
<li>GROUP_LOGIC - only AND/OR </li>
<li>SUBGROUP_LOGIC - only AND/OR </li>
<li>SUBGROUP_ID - only integers </li>
<li>VARIABLE_NM - must be in the target table </li>
<li>OPERATOR_NM - only =/&gt;/&lt;/&lt;=/&gt;=/BETWEEN/IN/NOT IN/NE/CONTAINS </li>
<li>RAW_VALUE - no unquoted values except integers, commas and spaces.</li>
</ul>
<dl class="section return"><dt>Returns</dt><dd>The &amp;outds table containing any bad rows, plus a REASON_CD column.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">inds</td><td>The table to be checked, with the format above </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">targetds=</td><td>The target dataset against which to verify VARIABLE_NM. This must be available (ie, the library must be assigned). </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">abort=</td><td>(YES) If YES will call <a class="el" href="mp__abort_8sas.html" title="abort gracefully according to context">mp_abort.sas</a> on any exceptions </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">outds=</td><td>(work.badrecords) The output table, which is a copy of the &amp;inds. table plus a REASON_CD column, containing only bad records. If bad records are found, the SYSCC value will be set to 1008 (a general data problem). Downstream processes should check this table (and return code) before continuing.</td></tr>
  </table>
  </dd>
</dl>
<h4>SAS Macros </h4>
<ul>
<li><a class="el" href="mp__abort_8sas.html" title="abort gracefully according to context">mp_abort.sas</a> </li>
<li><a class="el" href="mf__getuniquefileref_8sas.html" title="Assigns and returns an unused fileref.">mf_getuniquefileref.sas</a> </li>
<li><a class="el" href="mf__getvarlist_8sas.html" title="Returns dataset variable list direct from header.">mf_getvarlist.sas</a> </li>
<li><a class="el" href="mf__getvartype_8sas.html" title="Returns variable type - Character (C) or Numeric (N)">mf_getvartype.sas</a> </li>
<li><a class="el" href="mp__filtergenerate_8sas.html" title="Generates a filter clause from an input table, to a fileref.">mp_filtergenerate.sas</a> </li>
<li><a class="el" href="mp__filtervalidate_8sas.html" title="Checks a generated filter query for validity.">mp_filtervalidate.sas</a></li>
</ul>
<h4>Related Macros </h4>
<ul>
<li><a class="el" href="mp__filtergenerate_8sas.html" title="Generates a filter clause from an input table, to a fileref.">mp_filtergenerate.sas</a> </li>
<li><a class="el" href="mp__filtervalidate_8sas.html" title="Checks a generated filter query for validity.">mp_filtervalidate.sas</a></li>
</ul>
<dl class="section version"><dt>Version</dt><dd>9.3 </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Allan Bowe</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo</a></b></dt><dd>Support date / hex / name literals and exponents in RAW_VALUE field </dd></dl>

<p class="definition">Definition in file <a class="el" href="mp__filtercheck_8sas_source.html">mp_filtercheck.sas</a>.</p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.17-->
<!-- start footer part -->
<div id="nav-path" class="navpath">
  <!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_e914ee4d4a44400f1fdb170cb4ead18a.html">base</a></li><li class="navelem"><a class="el" href="mp__filtercheck_8sas.html">mp_filtercheck.sas</a></li>
    <li class="footer">
      Generated by
      <a href="https://www.doxygen.org/index.html">
        <img class="footer" src="doxygen.svg" alt="doxygen"
      /></a>
      1.12.0
    </li>
    <li>
      <i> For more information visit the </i>
      <a href="https://github.com/sasjs/core">Macro Core library</a>.
    </li>
  </ul>
</div>
